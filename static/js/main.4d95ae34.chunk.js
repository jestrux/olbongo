(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(24).concat([function(e,t,a){e.exports=a.p+"static/media/logo.43803f22.png"},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/logo.43803f22.png"},,,,function(e,t,a){e.exports=a.p+"static/media/findit.0298d394.png"},function(e,t,a){e.exports=a.p+"static/media/oclass.ace66f85.png"},function(e,t,a){e.exports=a.p+"static/media/odrive.fabc8887.png"},function(e,t,a){e.exports=a.p+"static/media/ojob.9bac4042.png"},function(e,t,a){e.exports=a(150)},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(22),r=a.n(s),i=a(10),c=a.n(i),l=a(12),m=a(1),u=a(2),d=a(4),p=a(3),h=a(5),f=a(7),v=a.n(f),g=a(6),E=(a(80),a(18)),b=function(e){var t=e.notification,a=t.message;Object(E.a)(t,["message"]);return o.a.createElement("div",{className:"notif show",dangerouslySetInnerHTML:{__html:a}})},w=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var o=a&&a.length?a[0]:{};return new CustomEvent("ot-notification",{detail:{message:e,options:o}})},k=function(e){document.dispatchEvent(e)},y=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={notifications:[]},a.showNotification=function(e){a.setState({notifications:Object(g.a)(a.state.notifications).concat([e])},function(){setTimeout(function(){var t=Object(g.a)(a.state.notifications).filter(function(t){return t.id!==e.id});a.setState({notifications:t})},3e3)})},a.wrapper=o.a.createRef(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("ot-notification",function(t){var a=t.detail;a.id="ot-notif-"+Math.random().toString(36).substr(2,5),e.showNotification(a)},!1)}},{key:"render",value:function(){var e=this.state.notifications;return o.a.createElement("div",{className:"ot-notifications-wrapper"},e.reverse().map(function(e,t){return o.a.createElement(b,{key:t,notification:e})}))}}]),t}(o.a.Component),O=a(14),N=(a(81),a(46)),C=a.n(N),j=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:""},a.inputChanged=function(e){a.setState(Object(O.a)({},e.target.name,e.target.value))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.password,s=a.length>0&&n.length>0;return o.a.createElement("div",{className:"ot-login-page"},o.a.createElement("form",{className:"ot-login-form",autoComplete:"off"},o.a.createElement("div",{className:"ot-login-title layout center"},o.a.createElement("img",{src:C.a,height:"50px",alt:""}),"Otalk Login"),o.a.createElement("div",{className:"ot-input-box"},o.a.createElement("input",{autoFocus:!0,autoComplete:"off",id:"username",className:a.length?"valid":"",required:!0,type:"text",name:"username",value:a,onChange:this.inputChanged}),o.a.createElement("label",{htmlFor:"username"},"Username")),o.a.createElement("div",{className:"ot-input-box"},o.a.createElement("input",{autoComplete:"off",id:"password",className:n.length?"valid":"",required:!0,type:"password",name:"password",value:n,onChange:this.inputChanged}),o.a.createElement("label",{htmlFor:"password"},"Password")),o.a.createElement("button",{type:"button",className:"ot-btn primary rounded "+(s?"":"disabled"),onClick:function(){return e.props.onLogin({username:a,password:n})}},"LOGIN")))}}]),t}(o.a.Component),S=a(8),x={XS:"extra-small",SM:"small",LG:"large",UKN:"unknown"};function _(){var e=[x.XS,x.SM,x.LG],t=x.UKN,a=["(max-width: 350px)","(max-width: 540px)","(min-width: 541px)"].map(function(e){return window.matchMedia(e)}),o=function(){var n=a.findIndex(function(e){return e.matches});return"undefined"!==typeof e[n]?e[n]:t},s=Object(n.useState)(o),r=Object(S.a)(s,2),i=r[0],c=r[1];return Object(n.useEffect)(function(){var e=function(){return c(o)};return a.forEach(function(t){return t.addListener(e)}),function(){return a.forEach(function(t){return t.removeListener(e)})}},[]),{isExtraSmall:i===x.XS,isSmall:i===x.SM,isLarge:i===x.LG}}a(82);var L=function(e){var t=e.id,a=e.noborder,n=e.center,s=e.children;Object(E.a)(e,["id","noborder","center","children"]);return o.a.createElement("div",{id:t,className:"ot-header layout center wrap "+(a?"no-border ":"")+(n?"center-justified":"")},s)},M=a(16),P=(a(83),function(e){var t=e.className,a=e.style,n=Object(E.a)(e,["className","style"]),s=n.bg||"#ecf1f0",r=n.padding||"",i=n.full||!1;return o.a.createElement("div",{id:"otPage",className:t+" "+(i?"full":""),style:Object(M.a)({},a,{backgroundColor:s,paddingTop:r})},n.children)}),I=(a(84),a(11)),F=(a(88),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={visible:!1,closing:!1,fixed:!1},a.handleIntersection=function(e){console.log("Intersection Event",e),e.isIntersecting?a.setState({fixed:!0}):a.setState({fixed:!1})},a.handleClose=function(){window.history.back()},a.manualClose=function(){var e=a.props.id;window.history.replaceState(Object(O.a)({},e,!0),e,"#"),a.setState({closing:!0},function(){a.closeBottomSheet()})},a.closeBottomSheet=function(){setTimeout(function(){a.props.onClose&&a.props.onClose()},350)},a.contentWrapper=o.a.createRef(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({visible:!0});var t=this.props.id;window.history.pushState(Object(O.a)({},t,!0),t,"#"+t),document.addEventListener("ot-popstate",function(a){var n=window.location.hash;console.log("State was popped yo!",n,n.indexOf(t)),-1===n.indexOf(t)&&e.state.visible&&(e.contentWrapper&&e.contentWrapper.current&&(e.contentWrapper.current.scrollTop=0),e.setState({closing:!0},function(){e.closeBottomSheet()}))},!1)}},{key:"render",value:function(){var e={onChange:this.handleIntersection,root:".ot-bottom-sheet",rootMargin:"0% 0% -".concat(window.innerHeight,"px")},t=this.state,a=t.visible,n=t.fixed,s=t.closing,r=this.props,i=r.contentLoaded,c=r.peekHeight,l=r.closeOnClick;c||(c=300);var m=window.innerHeight-(c+32);return o.a.createElement("div",{className:"ot-bottom-sheet "+(a?"visible ":"")+(n?"fixed ":"")+(i?"content-loaded ":"")+(s?"closing":"")},o.a.createElement("div",{className:"ot-bottom-sheet-bg",onClick:this.handleClose}),o.a.createElement(I.a,e,o.a.createElement("div",{ref:this.contentWrapper,className:"ot-bottom-sheet-content",style:{transform:"translateY( ".concat(m,"px)")}},o.a.createElement("button",{className:"ot-btn action back-btn",onClick:this.handleClose},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}))),o.a.createElement("div",{onClick:l?this.manualClose:null},this.props.children))))}}]),t}(o.a.Component)),z=function(e){var t=e.id,a=(e.className,e.children),s=(e.closeMenu,_().isLarge),r=Object(n.useState)(!1),i=Object(S.a)(r,2),c=i[0],l=i[1],m=o.a.Children.toArray(a);return o.a.createElement(o.a.Fragment,null,o.a.cloneElement(m[0],{onClick:function(){return l(!0)}}),s&&m[1],!s&&c&&o.a.createElement(F,{id:"menuOptions"+t,closeOnClick:!0,onClose:function(){return l(!1)},peekHeight:50*m[1].props.children.length+64},Object(g.a)(m[1].props.children)))},U=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={opened:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e="ot-menu-id"+Math.random().toString(36).substr(2,5);return o.a.createElement("div",{className:"ot-menu "+this.props.className},o.a.createElement(z,{id:e,className:this.props.className,opened:this.state.opened},this.props.children))}}]),t}(o.a.Component);U.Options=function(e){var t=e.className,a=e.baseLeft,n=e.children;return o.a.createElement("div",{className:"ot-menu-options "+(a?"base-left ":" ")+t},n)},U.Option=function(e){var t=e.className,a=e.children,n=e.onSelected;return o.a.createElement("button",{onClick:n,className:"ot-menu-option ot-btn flat "+t},a)},U.Trigger=function(e){var t=e.children,a=e.className,n=e.onClick,s="ot-menu-id"+Math.random().toString(36).substr(2,5),r="ot-menu-opener ".concat(a);return o.a.createElement("button",{htmlFor:s,className:r,onClick:n},t)};var T,A=U,D=a(23),R=a.n(D),H="https://www.olbongo.com/api/otalk",V=541,B=(a(90),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={visible:!1,src:null},a.handleImageInView=function(e){e.isIntersecting&&a.setState({visible:!0,src:a.props.src})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={onChange:this.handleImageInView,rootMargin:"0% 0%"},t=this.state.src,a=this.props,n=a.className,s=a.style;return o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,e,o.a.createElement("img",{style:s,className:n,src:t,alt:""})))}}]),t}(o.a.Component)),W=(a(91),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.images,a=e.index||0;return o.a.createElement("div",{className:"ot-woza-images"},t.map(function(e,t){return o.a.createElement(B,{className:t<=a?"visible":"",style:{zIndex:t},key:e.id,src:e.photo})}))}}]),t}(o.a.Component)),q=(a(92),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={show_responses:!1},a.handleEmojiClicked=function(e){a.props.onResponse(e.target.innerText)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.show_responses;return o.a.createElement("div",{className:"ot-woza-responder layout vertical center"},e&&o.a.createElement("div",{id:"quickEmojis",className:"layout"},o.a.createElement("span",{onClick:this.handleEmojiClicked,role:"img","aria-label":"nice"},"\ud83d\udc4d"),o.a.createElement("span",{onClick:this.handleEmojiClicked,role:"img","aria-label":"cool"},"\ud83d\udc4a"),o.a.createElement("span",{onClick:this.handleEmojiClicked,role:"img","aria-label":"awesome"},"\ud83d\udc4f"),o.a.createElement("span",{onClick:this.handleEmojiClicked,role:"img","aria-label":"respect"},"\ud83d\ude4c")),o.a.createElement("button",{className:"ot-btn action"},!e&&o.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevron-up"},o.a.createElement("polyline",{points:"18 15 12 9 6 15"})),e&&o.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x-circle"},o.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),o.a.createElement("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),o.a.createElement("line",{x1:"9",y1:"9",x2:"15",y2:"15"}))))}}]),t}(o.a.Component)),K=function(e){var t=e.user,a=e.woza,n=e.curImageIndex,s=e.quickresponder,r=a.is_liked,i=a.publisher,c=(a.published_at,a.images);return o.a.createElement("div",{className:"ot-woza-item"},o.a.createElement("div",{className:"ot-woza-item-title layout center"},o.a.createElement("div",{className:"ot-dp"},o.a.createElement("img",{src:i.dp,alt:""})),o.a.createElement("span",{className:"ot-post-item-owner",onClick:e.onViewUser},i.display_name)),o.a.createElement(W,{index:n,images:c}),!s&&o.a.createElement(q,{user:t,faved:r}))},J=(a(93),function(e){var t=e.thin;return o.a.createElement("div",{className:"ot-loader "+(t?"thin":"")},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null))}),Q=(a(94),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={curIndex:0,active:!1},a.startSlideshow=function(){var e=a.props.woza.images;T=setInterval(function(){a.state.curIndex<e.length-1?a.setState({curIndex:a.state.curIndex+1}):(clearInterval(T),a.props.onFinish())},3e3)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.active!==this.state.active&&(this.setState({active:this.props.active}),this.props.active&&this.startSlideshow())}},{key:"componentDidUpdate",value:function(){this.props.active!==this.state.active&&(this.setState({active:this.props.active}),this.props.active&&this.startSlideshow())}},{key:"render",value:function(){var e=this.props,t=e.woza,a=e.active,n=e.visible,s=this.state.curIndex,r="ot-woza-preview-item ";return r+=n?"visible ":" ",r+=a?"active ":" ",o.a.createElement("div",{className:r},o.a.createElement(K,{curImageIndex:s,woza:t,quickresponder:!0}))}}]),t}(o.a.Component)),G=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={wozas:[],previewIndex:-1},a.handlePreviewNext=function(){a.state.previewIndex<a.state.wozas.length-1?a.setState({previewIndex:a.state.previewIndex+1}):a.props.onFinish()},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.wozas,a=e.index;this.setState({wozas:t,previewIndex:a})}},{key:"render",value:function(){var e=this,t=this.state,a=t.wozas,n=t.previewIndex,s=n>=0?"".concat(-100*n,"%"):"0";return o.a.createElement("div",{className:"ot-woza-previewer"},o.a.createElement("div",{className:"ot-woza-preview-scoller layout",style:{transform:"translateX(".concat(s,")")}},a.map(function(t,a){return o.a.createElement(Q,{visible:a<=n,active:a===n,key:t.id,woza:t,onFinish:e.handlePreviewNext})})))}}]),t}(o.a.Component),Y=(a(95),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={initial_fetch:!1,fetching:!1,page:1,wozas:[],previewing:!1,previewIndex:-1},a.fetchUserWozas=function(){var e=a.props.user;a.setState({fetching:!0});var t={token:a.state.token,page:a.state.page};v.a.get(H+"/wall/",{params:t}).then(function(t){var n=t.data,o=R.a.filter(n,function(t){return t.images&&t.images.length&&t.publisher.id!==e.id});a.setState({wozas:Object(g.a)(a.state.wozas).concat(Object(g.a)(o)),fetching:!1,initial_fetch:!0,page:a.state.page+1},function(){n.length&&o.length<5&&a.fetchUserWozas()})}).catch(function(e){console.error("Fetch wozas Error",e),a.setState({initial_fetch:!0,fetching:!1})})},a.handleReachedBottom=function(e){var t=a.state.wozas,n=a.props.maxCount;n&&t.length>=n||e.isIntersecting&&!a.state.fetching&&a.fetchUserWozas()},a.previewWoza=function(e){a.props.onPreview&&a.props.onPreview(),a.setState({previewIndex:e})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user;this.setState({token:t.token},function(){e.fetchUserWozas()})}},{key:"componentDidUpdate",value:function(){void 0!==this.props.previewing&&this.props.previewing!==this.state.previewing&&(this.setState({previewing:this.props.previewing}),this.props.previewing||this.setState({previewIndex:-1}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.scrolled,n=t.wozas,s=t.initial_fetch,r=t.fetching,i=t.previewIndex,c=this.props,l=c.user,m=c.maxCount,u=c.mode,d=void 0===u?"grid":u,p=c.previewing,h={onChange:this.handleReachedBottom,root:"body",rootMargin:"60px 0%"};return o.a.createElement("div",{className:"ot-woza-list-wrapper mode-"+d+" previewing-"+p+" "+(a?"scrolled":"")},o.a.createElement("div",{className:"ot-woza-list layout wrap mode-"+d},s&&n.map(function(t,a){return(!m||a<m)&&o.a.createElement("div",{key:t.id,className:"ot-woza-item-wrapper",onClick:function(){return e.previewWoza(a)}},o.a.createElement(K,{key:t.id,woza:t,user:l}))})),r&&o.a.createElement("div",{className:"layout center-justified"},o.a.createElement(J,{thin:!0})),p&&o.a.createElement(G,{wozas:n,index:i,onFinish:function(){return window.history.back()}}),o.a.createElement(I.a,h,o.a.createElement("div",{style:{height:"20px"},className:"layout center-justified"})))}}]),t}(o.a.Component)),X=a(24),$=a.n(X),Z=(a(96),a(97),function(e,t,a,n){n(window.confirm(t))}),ee=(a(98),a(99),function(e){var t=e.images,a="",n="";if(t.length>1){switch(t.length){case 2:a="two";break;case 3:a="three";break;case 4:a="four";break;case 5:a="five";break;default:a="four"}a+="-image-grid",t.length>5&&(a+=" has-more"),n=t.length>5?t.length-4:""}var s=t.length>5?4:t.length;return o.a.createElement("div",{className:"ot-post-images "+a,extras:n},t.slice(0,s).map(function(e){return o.a.createElement("div",{key:e.id,className:"ot-post-image"},o.a.createElement(B,{src:e.photo}))}))});function te(e){if(/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(e)){return e.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)}return!1}var ae=function(e){var t=e.video,a=!!t&&te(t.video),n="";return a&&(n=function(e){return"https://www.youtube.com/embed/".concat(e,"?rel=0&amp;showinfo=0")}(a[2])),o.a.createElement("div",{className:"ot-post-video "+(a?"for-youtube":"")},a&&o.a.createElement("iframe",{title:"post video",src:n,frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0}),t&&!a&&o.a.createElement("video",{controls:!0},o.a.createElement("source",{src:t.video})))},ne=function(e){var t=e.images,a=e.videos;return o.a.createElement("div",{className:"ot-post-media"},t.length>0&&o.a.createElement(ee,{images:t}),!t.length&&a.length>0&&o.a.createElement(ae,{video:a[0]}))},oe=(a(100),function(){return o.a.createElement("svg",{fill:"#ffa200",className:"ot-post-like-icon",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),o.a.createElement("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}))}),se=function(){return o.a.createElement("svg",{fill:"#656565",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),o.a.createElement("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}))},re=function(e){return o.a.createElement(o.a.Fragment,null,e.faved?o.a.createElement(oe,{key:"favorited_icon"}):o.a.createElement(se,{key:"favorite_icon"}))},ie=function(e){var t=e.comment,a=t.id,n=(t.published_at,t.publisher),s=t.author,r=t.content,i=t.is_liked,c=n||s,l=c.dp,m=c.display_name;return o.a.createElement("div",{className:"ot-post-comment layout "+(-1!==a.toString().indexOf("ot-temp-id")?"temp":"")},o.a.createElement("div",{className:"ot-dp small"},o.a.createElement("img",{src:l,alt:""})),o.a.createElement("p",null,o.a.createElement("strong",null,m),"\xa0",o.a.createElement("span",{dangerouslySetInnerHTML:{__html:r}})),o.a.createElement("button",{className:"ot-comment-liker ot-btn action",onClick:e.onToggleLiked},o.a.createElement(re,{faved:i})))},ce=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=(t.fetched,t.comments),n=t.loading;return o.a.createElement("div",{className:"ot-post-comments"},a.length>0&&a.map(function(t,a){return o.a.createElement(ie,{key:t.id,comment:t,onToggleLiked:function(){return e.props.onToggleCommentLiked(a)}})}),n&&o.a.createElement("span",{className:"ot-comments-loader"},a.length>0?"loading more comments....":"loading comments...."),!n&&a.length<1&&o.a.createElement("span",{className:"ot-comments-loader"},"No comments"))}}]),t}(o.a.Component),le=a(47),me=a(17),ue=a.n(me),de=(a(118),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState({comment:e.target.value})},a.handleKeyup=function(e){"Enter"===e.key&&a.state.comment.length&&a.sendComment()},a.addQuickEmoji=function(e){a.setState({comment:a.state.comment+e.target.innerText}),a.inputField.current.textarea.focus()},a.sendComment=function(){var e=JSON.parse(JSON.stringify(a.state)).comment.replace(/\*([^*]+)\*/g,"<b>$1</b>");e.length&&(a.props.onNewComment(e),a.setState({comment:""}))},a.inputField=o.a.createRef(),a.state={comment:"",animate_icon:!0},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.autofocus&&this.inputField&&this.inputField.current.textarea.focus()}},{key:"render",value:function(){var e=this.state,t=e.comment,a=e.animate_icon,n=this.props,s=n.user,r=n.faved,i=n.quickemojis,c=a?500:0;return o.a.createElement(o.a.Fragment,null,i&&o.a.createElement("div",{id:"quickEmojis",className:"layout"},o.a.createElement("span",{onClick:this.addQuickEmoji,role:"img","aria-label":"rotfl"},"\ud83e\udd23"),o.a.createElement("span",{onClick:this.addQuickEmoji,role:"img","aria-label":"lol"},"\ud83d\ude02"),o.a.createElement("span",{onClick:this.addQuickEmoji,role:"img","aria-label":"thanks"},"\ud83d\ude4f"),o.a.createElement("span",{onClick:this.addQuickEmoji,role:"img","aria-label":"respect"},"\ud83d\ude4c"),o.a.createElement("span",{onClick:this.addQuickEmoji,role:"img","aria-label":"wink"},"\ud83d\ude09"),o.a.createElement("span",{onClick:this.addQuickEmoji,role:"img","aria-label":"hmmm"},"\ud83e\udd14"),o.a.createElement("span",{onClick:this.addQuickEmoji,role:"img","aria-label":"angry"},"\ud83d\ude21"),o.a.createElement("span",{onClick:this.addQuickEmoji,role:"img","aria-label":"watching"},"\ud83d\udc40")),o.a.createElement("div",{className:"ot-post-commenter layout center"},o.a.createElement("div",{className:"ot-dp small self-start"},o.a.createElement("img",{src:s.dp,alt:""})),o.a.createElement(ue.a,{ref:this.inputField,placeholder:"Write a Comment",className:"flex input",rows:1,onChange:this.handleChange,onKeyUp:this.handleKeyup,onClick:this.props.onFocused,value:t}),o.a.createElement("div",{className:"ot-post-commenter-actions self-end"+(!t.length&&this.props.onToggleLiked?" can-like":"")},o.a.createElement("button",{className:"ot-btn flat "+(t.length?"":"disabled"),onClick:this.sendComment},"POST"),o.a.createElement("button",{className:"ot-post-liker ot-btn action",onClick:this.props.onToggleLiked},o.a.createElement(le.MorphReplace,{width:20,height:20,duration:c,rotation:"none"},r?o.a.createElement(oe,{key:"favorited_icon"}):o.a.createElement(se,{key:"favorite_icon"}))))))}}]),t}(o.a.Component)),pe=function(e){var t=e.user,a=e.post,n=a.fetching_comments,s=a.is_liked,r=a.publisher,i=a.published_at,c=a.content,l=a.images,m=a.videos,u=a.comments,d=a.total_likes,p=a.total_commenets,h=r.id===t.id,f=d+" Like";f+=1!==d?"s":"";var v=p+" Comment";return v+=1!==p?"s":"",o.a.createElement("div",{className:"ot-post-item"},o.a.createElement("div",{className:"ot-post-item-title layout center"},o.a.createElement("div",{className:"ot-dp",onClick:e.onViewUser},o.a.createElement("img",{src:r.dp,alt:""})),o.a.createElement("div",null,o.a.createElement("span",{className:"ot-post-item-owner",onClick:e.onViewUser},r.display_name),o.a.createElement("span",{className:"ot-post-item-date"},i)),o.a.createElement("span",{className:"flex"}),h&&o.a.createElement(A,{className:"ot-post-manager"},o.a.createElement(A.Trigger,{className:"ot-btn action"},o.a.createElement("svg",{width:"28",height:"28",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),o.a.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))),o.a.createElement(A.Options,null,o.a.createElement(A.Option,{onSelected:e.onEditPost}," Edit "),o.a.createElement(A.Option,{onSelected:e.onDeletePost}," Delete ")))),o.a.createElement("p",{className:"ot-post-item-content"},c),(l.length>0||m.length>0)&&o.a.createElement(ne,{images:l,videos:m}),o.a.createElement("div",{className:"ot-post-reactions"},o.a.createElement("small",null,f),o.a.createElement("span",null),o.a.createElement("small",{className:p>0&&p!==u.length?"can-click":"",onClick:function(){u&&p>0&&p!==u.length&&e.onShowComments()}},v)),(u&&u.length>0||n)&&o.a.createElement(ce,{comments:u,loading:n,onToggleCommentLiked:e.onToggleCommentLiked}),o.a.createElement(de,{user:t,faved:s,onToggleLiked:e.onToggleLiked,onFocused:function(){console.log("Innerwidth:",window.innerWidth),window.innerWidth<V&&e.onShowComments()},onNewComment:e.onNewComment}))},he=(a(119),a(48)),fe=a.n(he),ve=(a(138),a(49)),ge=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={was_setup:!1},a.handleIncomingImage=function(e){var t=(e||a.props).image,n=t.file,o=t.src;!a.state.was_setup&&t&&(a.setState({image:t,was_setup:!0}),n?(a.processImage(n),a.uploadImage(n)):o&&a.uploadImage(o))},a.processImage=function(){var e=Object(l.a)(c.a.mark(function e(t){var n,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(ve.a)("\n            export function load(file) {\n                return new Promise((resolve, reject) => {\n                    var reader = new FileReader();\n                    reader.onload = function(e) {\n                        resolve(e.target.result);\n                    }\n                    reader.readAsDataURL(file);\n                });\n            }\n        "),e.next=3,n.load(t);case 3:o=e.sent,a.props.onImageLoaded(o);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.handleIncomingImage()}},{key:"componentWillReceiveProps",value:function(e){this.handleIncomingImage(e)}},{key:"fileUpload",value:function(e,t,a,n){var o=new FormData;o.append(a,t);var s={headers:{"content-type":"multipart/form-data"},params:n};return Object(f.post)(e,o,s)}},{key:"uploadImage",value:function(e){var t=this,a={token:this.props.token};this.fileUpload(H+"/upload_post_images/",e,"photo",a).then(function(e){var a=e.data.images[0];console.log("Upload image result: ",a),t.props.onImageUploaded(a)}).catch(function(e){var t="";t=e.response?e.response.data:e.request?e.request:e.message,console.error("Upload image Error",t)})}},{key:"render",value:function(){var e=this.props.image,t=e.id,a=e.src,n=e.photo,s=e.loading,r=-1!==t.toString().indexOf("ot-temp-id");return o.a.createElement("div",{className:"ot-new-post-image "+(s?"loading":"")+(r?" is-temp":"")},o.a.createElement("img",{src:a||n,alt:""}),o.a.createElement("button",{className:"ot-btn action",onClick:this.props.onRemoveImage},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}))))}}]),t}(o.a.Component),Ee=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={was_setup:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.video}},{key:"videoUpload",value:function(e,t,a){var n=new FormData;n.append("video",t);var o={headers:{"content-type":"multipart/form-data"},params:a};return Object(f.post)(e,n,o)}},{key:"uploadVideo",value:function(e){var t={token:this.props.token};this.videoUpload(H+"/upload_post_videos/",e,t).then(function(e){var t=e.data;console.log("Upload video result: ",t)}).catch(function(e){var t="";t=e.response?e.response.data:e.request?e.request:e.message,console.error("Upload video Error",t)})}},{key:"render",value:function(){var e=this.props.video,t=(e.id,e.loading);return o.a.createElement("div",{className:"ot-new-post-video "+(t?"loading":"")},o.a.createElement(ae,{video:e}),o.a.createElement("button",{className:"ot-btn action",onClick:this.props.onRemoveVideo},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}))))}}]),t}(o.a.Component),be=function(e){var t=e.readonly,a=e.images,n=e.videos,s=e.token,r=n&&n.length?n[0]:null;return o.a.createElement("div",{className:"ot-new-post-media"},n&&n.length>0&&o.a.createElement(Ee,{video:r,token:s,onVideoUploaded:function(a){t||e.onVideoUploaded(a)},onRemoveVideo:e.onRemoveVideo}),a&&a.length>0&&o.a.createElement("div",{className:"layout ot-new-post-images"},a.map(function(a,n){return o.a.createElement(ge,{key:n,image:a,token:s,onImageLoaded:function(o){t||e.onImageLoaded(a,n,o)},onImageUploaded:function(o){t||e.onImageUploaded(a,n,o)},onRemoveImage:function(){return e.onRemoveImage(n)}})})))},we=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={facingMode:"user"},a.setup=function(){var e=a.props,t=(e.video,e.audio);navigator.mediaDevices&&navigator.mediaDevices.getUserMedia({video:{facingMode:a.state.facingMode},audio:t}).then(function(e){a.setState({mediaStream:e}),a.video.srcObject=e,a.video.play()}).catch(function(e){return e})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.setup()}},{key:"componentWillUnmount",value:function(){this.state.mediaStream.getVideoTracks()[0].stop()}},{key:"capture",value:function(){var e=this.state.mediaStream.getVideoTracks()[0];return new window.ImageCapture(e).takePhoto()}},{key:"switchMode",value:function(){var e=this,t="environment"===this.state.facingMode?"user":"environment";this.setState({facingMode:t},function(){e.state.mediaStream.getVideoTracks()[0].stop(),e.setState({mediaStream:null}),setTimeout(function(){e.setup()})})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:this.props.style},this.props.children,o.a.createElement("video",{ref:function(t){e.video=t}}))}}]),t}(n.Component);we.defaultProps={audio:!1,video:!0,style:{},children:null};var ke=we,ye=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={image:null},a.takePicture=function(){a.camera.capture().then(function(e){var t=URL.createObjectURL(e);a.img.src=t,a.setState({image:e}),console.log(t),a.img.onload=function(){URL.revokeObjectURL(a.src)}})},a.switchCameraMode=function(){a.camera.switchMode()},a.handleRepeat=function(){a.setState({image:null})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.image;return o.a.createElement("div",{id:"newPostCamera"},!t&&o.a.createElement(ke,{ref:function(t){e.camera=t}},o.a.createElement("div",{id:"captureContainer"},o.a.createElement("button",{className:"ot-btn flat",onClick:this.props.onCancel},"CANCEL"),o.a.createElement("div",{id:"captureButton",onClick:this.takePicture}),o.a.createElement("button",{className:"ot-btn action",onClick:this.switchCameraMode},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),o.a.createElement("path",{d:"M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 11.5V13H9v2.5L5.5 12 9 8.5V11h6V8.5l3.5 3.5-3.5 3.5z"}))))),o.a.createElement("img",{id:"captureImage",className:t?"":"hidden",ref:function(t){e.img=t},alt:""}),t&&o.a.createElement("div",{id:"captureContainer"},o.a.createElement("button",{className:"ot-btn flat",onClick:this.handleRepeat},"REPEAT"),o.a.createElement("button",{className:"ot-btn flat",onClick:function(){return e.props.onAddPicture(t)}},"CONTINUE")))}}]),t}(n.Component),Oe=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={takingPicture:!1},a.closeCamera=function(){a.props.onCloseCamera(),a.inputField&&a.inputField.current.textarea.focus()},a.handleAddPicture=function(e){a.closeCamera(),a.props.onAddPicture(e)},a.inputField=o.a.createRef(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.inputField&&this.inputField.current.textarea.focus()}},{key:"render",value:function(){var e=this.props,t=e.takingPicture,a=e.posting,n=e.editting,s=e.user,r=e.content,i=e.videos,c=e.images;return o.a.createElement(o.a.Fragment,null,t&&o.a.createElement(fe.a,{enabled:t},o.a.createElement(ye,{onCancel:this.closeCamera,onAddPicture:this.handleAddPicture})),o.a.createElement("div",{className:"ot-new-post-mobile "+(a?"posting ":" ")+(a&&n?"saving ":" ")},o.a.createElement("div",{className:"ot-new-post-mobile-nav layout center"},o.a.createElement("button",{className:"ot-btn action",onClick:this.props.onBackClicked},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}))),o.a.createElement("span",null,n?"Edit":"New"," Post"),o.a.createElement("span",{className:"flex"}),o.a.createElement("button",{className:"ot-btn flat",onClick:this.props.onSubmitClicked},n?"SAVE":"SUBMIT")),o.a.createElement("div",{className:"ot-new-post-mobile-content"},o.a.createElement("div",{className:"ot-new-post-wrapper layout"},o.a.createElement("div",{className:"ot-dp"},o.a.createElement("img",{src:s.dp,alt:""})),o.a.createElement(ue.a,{ref:this.inputField,placeholder:"Share your inisights...",className:"ot-new-post-text",rows:1,value:r,onChange:this.props.onChange,onKeyUp:this.props.onKeyUp})),o.a.createElement(be,{readonly:!0,token:s.token,videos:i,images:c,onRemoveImage:this.props.onRemoveImage,onRemoveVideo:this.props.onRemoveVideo})),i.length<1&&o.a.createElement("div",{className:"ot-new-post-mobile-actions layout center-center"},o.a.createElement("input",{type:"file",id:"mobileImages",onChange:this.props.onFilesPicked}),o.a.createElement("label",{className:"ot-btn flat",htmlFor:"mobileImages"},"ADD FILES"),"\u2003\u2003",o.a.createElement("button",{className:"ot-btn flat",onClick:this.props.onOpenCamera},"TAKE PICTURE"))))}}]),t}(o.a.Component),Ne=5,Ce=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={creatingOnMobile:!1,takingPicture:!1,posting:!1,dragover:!1,focused:!1,post_id:null,content:"",images:[],videos:[]},a.FileDragHover=function(e){if(e.stopPropagation(),e.preventDefault(),!a.state.videos.length){var t="dragleave"!==e.type&&"drop"!==e.type;setTimeout(function(){a.setState({dragover:t})},20)}},a.FileSelectHandler=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.stopPropagation(),e.preventDefault(),a.state.videos.length)return k(w("You can not upload both videos and images"));t&&a.FileDragHover(e);var n=e.target.files||e.dataTransfer.files;n&&n.length&&a.processFiles(n)},a.openCamera=function(){console.log("Opening camera...."),window.history.pushState({takingPicture:!0},"takingPicture","#creatingOnMobile/takingPicture"),a.setState({takingPicture:!0})},a.closeCamera=function(){window.history.back(),a.setState({takingPicture:!1})},a.imageLoaded=function(e,t,n){var o=Object(g.a)(a.state.images);e.src=n,e.loading=!1,o.splice(t,1,e),a.setState({images:o})},a.imageUpLoaded=function(e,t,n){var o=Object(g.a)(a.state.images);e.id=n.id,e.photo=n.photo,o.splice(t,1,e),a.setState({images:o})},a.videoUpLoaded=function(e){var t=Object(g.a)(a.state.videos)[0];t.id=e.id,a.setState({videos:[t]})},a.removeVideo=function(){a.setState({videos:[]})},a.removeImage=function(e){var t=Object(g.a)(a.state.images);t.splice(e,1),a.setState({images:t})},a.handleAddPicture=function(e){if(a.state.images.length!==Ne){var t="ot-temp-id"+Math.random().toString(36).substr(2,5);e.lastModifiedDate=new Date,e.name="ot-file-"+Math.random().toString(36).substr(2,5),a.setState({images:Object(g.a)(a.state.images).concat([{id:t,file:e,loading:!0,src:""}])})}else k(w("You can not upload more than ".concat(Ne," images")))},a.processFiles=function(e){var t=Array.from(e).filter(function(e){return-1!==e.type.indexOf("image")}).map(function(e){return{id:"ot-temp-id"+Math.random().toString(36).substr(2,5),file:e,loading:!0,src:""}}),n=Ne-a.state.images.length;n<0&&(n=0),n<t.length&&k(w("You can not upload more than ".concat(Ne," images"))),a.setState({images:a.state.images.concat(Object(D.slice)(t,0,n))}),Array.from(e).filter(function(e){return-1===e.type.indexOf("image")}).forEach(function(e){var t=e.name.substr(0,15).trim();t+=e.name.length>15?"...":"",k(w("<strong>".concat(t,"</strong> is not an image")))})},a.setFocus=function(e,t){t||a.setState({focused:e}),e&&t&&window.innerWidth<V&&a.openMobileCreate()},a.openMobileCreate=function(){window.history.pushState({creating:!0},"creating","#creatingOnMobile"),a.setState({creatingOnMobile:!0})},a.closeMobileCreate=function(){window.history.back(),a.setState({creatingOnMobile:!1}),a.state.post_id&&a.props.onCancelEditting()},a.handleChange=function(e){var t=e.target.value,n=t.indexOf("https"),o=t.substr(n,t.length);a.setState({content:t},function(){if(-1!==n&&te(o)){var e=[{id:"ot-temp-id"+Math.random().toString(36).substr(2,5),video:o}];t=t.replace(o,""),a.setState({content:t,videos:e})}})},a.handleKeyup=function(e){"Enter"===e.key&&a.state.content.length&&a.submitClicked()},a.sendPost=function(e,t,a){var n={headers:{"content-type":"application/x-www-form-urlencode"},params:a};return Object(f.post)(e,t,n)},a.submitClicked=Object(l.a)(c.a.mark(function e(){var t,n,o,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({posting:!0}),(t=new FormData).append("content",a.state.content),!a.state.images.length){e.next=6;break}return e.next=6,a.state.images.map(function(e){return e.photo=e.file,console.log(e.id),t.append("photo_list",e.id),e.id});case 6:a.state.videos.length&&!a.state.images.length&&(n=a.state.videos[0],t.set("content",a.state.content+n.video)),o={token:a.props.user.token},s=H+(a.state.post_id?"/edit_post":"/publish_post/"),a.state.post_id&&t.append("id",a.state.post_id),a.sendPost(s,t,o).then(function(e){var t=e.data;a.setState({posting:!1});var n=t[0];console.log("Submit post result: ",n),n.status&&(a.props.onNewPost(n.post),a.state.creatingOnMobile&&a.closeMobileCreate(),a.setState({posting:!1,dragover:!1,focused:!1,content:"",images:[],videos:[]}))}).catch(function(e){a.setState({posting:!1}),k(w("Error submitting post"));var t="";t=e.response?e.response.data:e.request?e.request:e.message,console.error("Submit post Error",t)});case 11:case"end":return e.stop()}},e,this)})),a.wrapper=o.a.createRef(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.post){var t=this.props.post,a=t.id,n=t.content,o=t.images,s=t.videos;this.setState({post_id:a,content:n,images:o,videos:s},function(){window.innerWidth<V&&e.openMobileCreate()})}window.addEventListener("dragover",this.FileDragHover,!1),window.addEventListener("dragleave",this.FileDragHover,!1),window.addEventListener("drop",this.FileSelectHandler,!1),this._isMounted=!0,document.addEventListener("ot-popstate",function(t){if(e._isMounted){var a=window.location.hash;console.log("Popstate hash: ",a,a.indexOf("creatingOnMobile")),-1===a.indexOf("creatingOnMobile")&&e.state.creatingOnMobile&&(e.setState({creatingOnMobile:!1}),e.state.post_id&&e.props.onCancelEditting()),-1===a.indexOf("takingPicture")&&e.state.takingPicture&&e.setState({takingPicture:!1})}},!1)}},{key:"render",value:function(){var e=this,t=this.props.user,a=this.state,n=a.creatingOnMobile,s=a.takingPicture,r=a.posting,i=a.post_id,c=a.dragover,l=(a.focused,a.content),m=a.images,u=a.videos,d=r&&i;(m.length||u.length)&&m.length;return o.a.createElement(o.a.Fragment,null,n&&o.a.createElement(Oe,{user:t,content:l,images:m,videos:u,takingPicture:s,posting:r,editting:null!=i,onChange:this.handleChange,onKeyUp:this.handleKeyup,onFilesPicked:this.FileSelectHandler,onRemoveImage:this.removeImage,onRemoveVideo:this.removeVideo,onSubmitClicked:this.submitClicked,onBackClicked:this.closeMobileCreate,onOpenCamera:this.openCamera,onCloseCamera:this.closeCamera,onAddPicture:this.handleAddPicture}),o.a.createElement("div",{ref:this.wrapper,className:"ot-new-post "+(d?"saving ":" ")+(r?"posting ":" ")+(c?"dragging ":"")+(m.length?"has-images":"")},o.a.createElement("div",{className:"ot-new-post-wrapper layout"},o.a.createElement("div",{className:"ot-dp"},o.a.createElement("img",{src:t.dp,alt:""})),o.a.createElement(ue.a,{placeholder:"Share your inisights...",className:"ot-new-post-text",rows:1,onClick:function(){return e.setFocus(!0,!0)},onFocus:function(){return e.setFocus(!0)},onBlur:function(){return e.setFocus(!1)},onChange:this.handleChange,onKeyUp:this.handleKeyup,value:l})),o.a.createElement(be,{token:t.token,videos:u,images:m,onImageLoaded:this.imageLoaded,onImageUploaded:this.imageUpLoaded,onRemoveImage:this.removeImage,onVideoUploaded:this.videoUpLoaded,onRemoveVideo:this.removeVideo}),o.a.createElement("div",{className:"ot-new-post-buttons layout justified"},o.a.createElement("div",{className:"layout center"},o.a.createElement("input",{type:"file",id:"mobileImages",onChange:function(t){return e.FileSelectHandler(t,!1)}}),o.a.createElement("label",{className:"ot-btn flat rounded",htmlFor:"mobileImages"},o.a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),o.a.createElement("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})),"\xa0\xa0Add Photo")),o.a.createElement("button",{className:"ot-btn flat"+(l.length?"":" disabled"),onClick:this.submitClicked},i?"SAVE":"POST"))),o.a.createElement("button",{className:"ot-btn fab ot-post-creator-fab",onClick:this.openMobileCreate},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}))))}}]),t}(o.a.Component),je=(a(139),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.post,a=e.user;return o.a.createElement("div",{className:"ot-edit-post-wrapper"},o.a.createElement("div",{className:"ot-edit-post"},o.a.createElement("div",{className:"ot-edit-post-title layout center justified"},"Edit Post",o.a.createElement("button",{className:"ot-btn action",onClick:this.props.onCancelEditting},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})))),o.a.createElement(Ce,{post:t,user:a,onNewPost:this.props.onNewPost,onCancelEditting:this.props.onCancelEditting})))}}]),t}(o.a.Component)),Se=(a(140),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={fetching_comments:!0,comments:[]},a.toggleCommentLiked=function(e){var t=Object(g.a)(a.state.comments),n=JSON.parse(JSON.stringify(t[e])),o=n.is_liked;n.is_liked=!o,t.splice(e,1,n),a.setState({comments:t});var s=a.props.user,r=H+(o?"/unlike_comment/":"/like_comment/"),i={token:s.token,comment_id:n.id};v.a.get(r,{params:i}).then(function(s){var r=s.data[0];console.log("Toggle Comment like response",r),r.status?a.props.onToggleCommentLike(e,!o):(n.is_liked=o,t.splice(e,1,n),a.setState({comments:t}))}).catch(function(s){console.error("Toggle comment like Error",s),n.is_liked=o,t.splice(e,1,n),a.setState({comments:t})})},a.addComment=function(e){var t=a.props,n=t.post,o=t.user,s={id:"ot-temp-id"+Math.random().toString(36).substr(2,5),content:e,published_at:new Date,is_liked:!1,publisher:a.props.user},r=Object(g.a)(a.state.comments),i=r.length;r.push(s),a.setState({comments:r});var c={token:o.token},l=new FormData;l.append("content",e),l.append("post_id",n.id),v()({method:"POST",url:H+"/publish_comment/",headers:{"content-type":"application/x-www-form-urlencode"},params:c,data:l}).then(function(e){var t=e.data[0];console.log("Comment result: ",t),t.status?(s.id=s.id.replace("ot-temp-id",""),r.splice(i,1,s),a.props.onNewComment(s)):(n.total_comments-=1,n.total_commenets-=1,r.splice(i,1)),a.setState({comments:r})}).catch(function(e){var t="";t=e.response?e.response.data:e.request?e.request:e.message,console.error("Comment Error",t),r.splice(i,1),a.setState({comments:r})})},a.fetchComments=function(){var e=a.props,t=e.user,n=e.post,o={token:t.token,post_id:n.id};v.a.get(H+"/comments/",{params:o}).then(function(e){console.log("Post Comments result: ",e,200===e.status),200===e.status&&a.setState({comments:e.data}),a.setState({fetching_comments:!1})}).catch(function(e){var t="";t=e.response?e.response.data:e.request?e.request:e.message,console.error("Post Comments Error",t),a.setState({fetching_comments:!1})})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.history.pushState({commentingOnMobile:!0},"commentingOnMobile","#commentingOnMobile"),document.addEventListener("ot-popstate",function(t){var a=window.location.hash;console.log("commentingOnMobile Popstate hash: ",a,a.indexOf("commentingOnMobile")),-1===a.indexOf("commentingOnMobile")&&e.props.onCancelCommenting()},!1),this.fetchComments()}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.post,n=this.state,s=n.fetching_comments,r=n.comments;return o.a.createElement("div",{className:"ot-post-comments-mobile"},o.a.createElement("div",{className:"ot-post-comments-mobile-nav layout center"},o.a.createElement("button",{className:"ot-btn action",onClick:function(){return window.history.back()}},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}))),o.a.createElement("span",null,"Post Comments")),o.a.createElement("div",{className:"ot-post-comments-mobile-content"},o.a.createElement(ce,{comments:r,loading:s,onToggleCommentLiked:this.toggleCommentLiked})),o.a.createElement("div",{className:"ot-post-comments-mobile-actions"},o.a.createElement(de,{user:t,faved:a.is_liked,autofocus:!0,quickemojis:!0,onNewComment:this.addComment})))}}]),t}(o.a.Component)),xe=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={initial_fetch:!1,fetching:!1,page:1,postToEdit:null,postToComment:null,posts:[]},a.fetchUserPosts=function(){a.setState({fetching:!0});var e={token:a.state.token,page:a.state.page};v.a.get(H+"/wall/",{params:e}).then(function(e){var t=e.data;console.log("Fetch posts result",t),a.setState({posts:Object(g.a)(a.state.posts).concat(Object(g.a)(t)),fetching:!1,initial_fetch:!0,page:a.state.page+1})}).catch(function(e){console.error("Fetch posts Error",e),a.setState({initial_fetch:!0,fetching:!1})})},a.toggleCommentLiked=function(e,t,n){var o=JSON.parse(JSON.stringify(e.comments[n])),s=o.is_liked,r=Object(g.a)(a.state.posts);o.is_liked=!s,e.comments.splice(n,1,o),r.splice(t,1,e),a.setState({posts:r});var i=H+(s?"/unlike_comment/":"/like_comment/"),c={token:a.state.token,comment_id:o.id};v.a.get(i,{params:c}).then(function(i){var c=i.data[0];console.log("Toggle Comment like response",c),c.status||(o.is_liked=s,e.comments.splice(n,1,o),r.splice(t,1,e),a.setState({posts:r}))}).catch(function(i){console.error("Toggle comment like Error",i),o.is_liked=s,e.comments.splice(n,1,o),r.splice(t,1,e),a.setState({posts:r})})},a.setCommentLiked=function(e,t,n,o){var s=JSON.parse(JSON.stringify(e.comments[n])),r=Object(g.a)(a.state.posts);s.is_liked=o,e.comments.length<n||(e.comments.splice(n,1,s),r.splice(t,1,e),a.setState({posts:r}))},a.toggleLiked=function(e,t){var n=e.is_liked,o=Object(g.a)(a.state.posts);e.is_liked=!n,e.total_likes+=n?-1:1,o.splice(t,1,e),a.setState({posts:o});var s=H+(n?"/unlike_post/":"/like_post/"),r={token:a.state.token,post_id:e.id};v.a.get(s,{params:r}).then(function(s){s.data[0].status||(e.is_liked=n,o.splice(t,1,e),a.setState({posts:o}))}).catch(function(s){console.error("Toggle like Error",s),e.is_liked=n,o.splice(t,1,e),a.setState({posts:o})})},a.newPost=function(e){var t=Object(g.a)(a.state.posts);t.unshift(e),console.log(e,t),k(w("Your post has been submitted")),a.setState({posts:t})},a.addComment=function(e,t,n){var o=Object(M.a)({},e).comments.length;console.log(e.comments.length),e.total_comments+=1,e.total_commenets+=1;var s={id:"ot-temp-id"+Math.random().toString(36).substr(2,5),content:n,published_at:new Date,is_liked:!1,publisher:a.props.user};e.comments.push(s);var r=Object(g.a)(a.state.posts);r.splice(t,1,e),a.setState({posts:r});var i={token:a.state.token},c=new FormData;c.append("content",n),c.append("post_id",e.id),v()({method:"POST",url:H+"/publish_comment/",headers:{"content-type":"application/x-www-form-urlencode"},params:i,data:c}).then(function(n){var i=n.data[0];console.log("Comment result: ",i),i.status?s.id=s.id.replace("ot-temp-id",""):(e.comments.splice(o,1),e.total_comments-=1,e.total_commenets-=1),r.splice(t,1,e),a.setState({posts:r})}).catch(function(n){var s="";s=n.response?n.response.data:n.request?n.request:n.message,console.error("Comment Error",s),e.comments.splice(o,1),r.splice(t,1,e),a.setState({posts:r})})},a.addCommentToPost=function(e,t,n){e.total_comments+=1,e.total_commenets+=1,e.comments.push(n);var o=Object(g.a)(a.state.posts);o.splice(t,1,e),a.setState({posts:o})},a.showComments=function(e,t){if(window.innerWidth<V)return a.commentOnMobile(e,t);e.fetching_comments=!0;var n=Object(g.a)(a.state.posts);n.splice(t,1,e),a.setState({posts:n});var o={token:a.state.token,post_id:e.id};v.a.get(H+"/comments/",{params:o}).then(function(o){console.log("Post Comments result: ",o,200===o.status),200===o.status&&(e.comments=o.data),e.fetching_comments=!1,n.splice(t,1,e),console.log(n[0]),a.setState({posts:n})}).catch(function(o){var s="";s=o.response?o.response.data:o.request?o.request:o.message,console.error("Post Comments Error",s),e.fetching_comments=!1,n.splice(t,1,e),a.setState({posts:n})})},a.commentOnMobile=function(e,t){a.setState({postToComment:{post:e,index:t}})},a.cancelCommenting=function(){a.setState({postToComment:null})},a.editPost=function(e,t){a.setState({postToEdit:{post:e,index:t}})},a.savePost=function(e){var t=Object(g.a)(a.state.posts),n=a.state.postToEdit.index;t.splice(n,1,e),a.setState({posts:t})},a.cancelEditPost=function(){a.setState({postToEdit:null})},a.deletePost=function(e,t){var n=Object(g.a)(a.state.posts),o=H+"/delete_post",s={token:a.state.token,post_id:e.id};Z("Delete Post","Are you sure you want to delete post","Delete",function(e){e&&v.a.get(o,{params:s}).then(function(e){e.data[0].status&&(k(w("Post Deleted")),n.splice(t,1),a.setState({posts:n}))}).catch(function(e){console.error("Delete post Error",e)})})},a.handleReachedBottom=function(e){e.isIntersecting&&!a.state.fetching&&a.fetchUserPosts()},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.user,n=t.posts;t.readonly?a&&this.setState({posts:n,initial_fetch:!0}):this.setState({token:a.token},function(){e.fetchUserPosts()})}},{key:"render",value:function(){var e=this,t=this.state,a=t.scrolled,n=t.posts,s=t.postToEdit,r=t.postToComment,i=t.initial_fetch,c=t.fetching,l=this.props,m=l.user,u=l.readonly,d={onChange:this.handleReachedBottom,root:"body",rootMargin:"60px 0%"};return o.a.createElement(o.a.Fragment,null,s&&o.a.createElement(je,{user:m,post:s.post,onNewPost:this.savePost,onCancelEditting:this.cancelEditPost}),r&&o.a.createElement(Se,{user:m,post:r.post,onNewComment:function(t){return e.addCommentToPost(r.post,r.index,t)},onToggleCommentLike:function(t,a){return e.setCommentLiked(r.post,r.index,t,a)},onCancelCommenting:this.cancelCommenting}),o.a.createElement("div",{className:"ot-post-list-wrapper "+(a?"scrolled":"")},!u&&o.a.createElement(Ce,{user:m,onNewPost:this.newPost}),o.a.createElement("div",{className:"ot-post-list"},i&&n.map(function(t,a){return o.a.createElement(pe,{key:t.id,post:t,user:m,onToggleLiked:function(){return e.toggleLiked(t,a)},onNewComment:function(n){return e.addComment(t,a,n)},onToggleCommentLiked:function(n){return e.toggleCommentLiked(t,a,n)},onShowComments:function(){return e.showComments(t,a)},onEditPost:function(){return e.editPost(t,a)},onDeletePost:function(){return e.deletePost(t,a)},onViewUser:function(){return e.props.onViewUser(t.publisher)}})})),c&&o.a.createElement("div",{className:"layout center-justified"},o.a.createElement(J,{thin:!0})),o.a.createElement(I.a,d,o.a.createElement("div",{style:{height:"20px"},className:"layout center-justified"}))))}}]),t}(o.a.Component),_e=(a(141),function(e){var t=e.user,a=e.onViewProfile,n=e.onLogout,s=e.onViewUser,r=_().isLarge;return o.a.createElement(P,{style:{marginTop:r?"1.5em":""}},o.a.createElement(L,null,o.a.createElement("img",{className:"ot-logo",src:$.a,alt:""}),"\u2003",o.a.createElement("span",{className:"ot-header-title"},"Otalk"),o.a.createElement("span",{className:"flex"}),o.a.createElement("div",{className:"ot-dp"},o.a.createElement("img",{src:t.dp,alt:"",onClick:a})),o.a.createElement(A,{className:"ot-auth-user"},o.a.createElement(A.Trigger,{className:"ot-btn flat layout center"},o.a.createElement("span",{className:"ot-dp"},o.a.createElement("img",{src:t.dp,alt:""})),o.a.createElement("p",null,"\xa0\xa0 ",t.display_name),o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),o.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))),o.a.createElement(A.Options,null,o.a.createElement(A.Option,{onSelected:n}," Logout ")))),o.a.createElement("div",{className:"home-page-wrapper layout start "+(r?"for-large":"")},o.a.createElement(xe,{user:t,onViewUser:s}),r&&o.a.createElement("div",null,o.a.createElement("div",{className:"home-page-wozas"},o.a.createElement("div",{className:"layout center justified"},o.a.createElement("h3",null,"Woza"),o.a.createElement("button",{className:"ot-btn flat"},"See All")),o.a.createElement(Y,{maxCount:4,user:t}),o.a.createElement("div",null,o.a.createElement("button",{className:"ot-btn block"},"Share your moments"))))))}),Le=(a(142),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={mode:"grid",previewing:!1},a.enterPreviewing=function(){window.history.pushState({wozaPreviewing:!0},"wozaPreviewing","#wozaPreviewing"),a.setState({previewing:!0})},a.handleSwitchMode=function(){a.setState({mode:"grid"===a.state.mode?"strip":"grid"})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("ot-popstate",function(t){-1===window.location.hash.indexOf("#wozaPreviewing")&&e.state.previewing&&e.setState({previewing:!1})},!1)}},{key:"render",value:function(){var e=this.props.user,t=this.state,a=t.mode,n=t.previewing;return o.a.createElement(P,{full:n,className:"woza-page"},o.a.createElement(L,{noborder:!0},o.a.createElement("span",{className:"ot-header-title"},"Woza"),o.a.createElement("span",{className:"flex"}),o.a.createElement("button",{className:"ot-btn flat mode-switch-btn",onClick:this.handleSwitchMode},"grid"===a?"Strip":"Grid"," View")),o.a.createElement(Y,{previewing:n,mode:a,user:e,onPreview:this.enterPreviewing}))}}]),t}(o.a.Component)),Me=(a(143),function(e){var t=e.type,a=e.person,n=o.a.createElement("div",{className:"ot-person-card"},o.a.createElement("div",{className:"ot-dp lg"},o.a.createElement("img",{src:a.dp,alt:""})),o.a.createElement("h3",null,a.display_name.toLowerCase()),o.a.createElement("div",{className:"user-stats layout center-center"},o.a.createElement("div",{className:"user-stat"},o.a.createElement("div",{className:"number"},a.followers),o.a.createElement("div",{className:"label"},"Followers")),o.a.createElement("div",{className:"user-stat"},o.a.createElement("div",{className:"number"},a.following),o.a.createElement("div",{className:"label"},"Following")),o.a.createElement("div",{className:"user-stat"},o.a.createElement("div",{className:"number"},a.friends),o.a.createElement("div",{className:"label"},"Friends"))),o.a.createElement("div",{className:"layout center"},o.a.createElement("button",{className:"ot-btn accent rounded"},"Follow"),o.a.createElement("button",{className:"ot-btn accent rounded"},"Add Friend"))),s=o.a.createElement("div",{className:"ot-person-item layout start"},o.a.createElement("div",{className:"ot-dp lg"},o.a.createElement("img",{src:a.dp,alt:""})),o.a.createElement("div",null,o.a.createElement("span",null,a.display_name.toLowerCase()),o.a.createElement("div",{className:"layout center"},o.a.createElement("button",{className:"ot-btn rounded"},"Follow"),o.a.createElement("button",{className:"ot-btn rounded"},"Add Friend"))));return o.a.createElement(o.a.Fragment,null,"card"===t&&n,"item"===t&&s)}),Pe=function(e){var t=e.people,a=_().isLarge;return o.a.createElement("div",{id:"peopleList",className:a?"for-large":""},t.map(function(e){return o.a.createElement(Me,{type:a?"card":"item",key:e.id,person:e})}))},Ie=function(e){var t=Object(n.useState)(!1),a=Object(S.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)(!1),m=Object(S.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)(1),h=Object(S.a)(p,2),f=h[0],E=h[1],b=Object(n.useState)([]),w=Object(S.a)(b,2),k=w[0],y=w[1];_().isLarge;Object(n.useEffect)(function(){e.user&&O(),document.addEventListener("ot-popstate",function(e){-1===window.location.hash.indexOf("#discoverSearching")&&u&&d(!1)},!1)},[]);var O=function(){var t=Object(l.a)(c.a.mark(function t(){var a,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),a={token:e.user.token,page:f},t.prev=2,t.next=5,v.a.get(H+"/peoples/",{params:a});case 5:if(void 0===(n=t.sent).data.status){t.next=9;break}return console.log("Error fetching people: ",n.data),t.abrupt("return");case 9:y(Object(g.a)(k).concat(Object(g.a)(n.data))),r(!1),E(f+1),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),console.error("Fetch posts Error",t.t0),r(!1);case 18:case"end":return t.stop()}},t,this,[[2,14]])}));return function(){return t.apply(this,arguments)}}();return o.a.createElement(P,{padding:"60px",className:"discover-page"},o.a.createElement(L,{noborder:u,centers:!0},o.a.createElement("div",{className:"top-bar layout center"},o.a.createElement("span",{className:"ot-header-title layout center"},u&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"ot-btn action",onClick:function(){return window.history.back()}},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}))),"\xa0\xa0"),"\xa0 Discover"))),o.a.createElement("div",{className:"ot-discover"},o.a.createElement(Pe,{people:k}),s&&o.a.createElement("div",{className:"layout center-justified"},o.a.createElement(J,{thin:!0}))))},Fe=(a(144),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={initial_fetch:!1,page:1,friends:[]},a.fetchFriends=function(){a.setState({fetching:!0});var e={token:a.state.token,page:a.state.page};v.a.get(H+"/following/",{params:e}).then(function(e){var t=e.data;console.log("Fetch friends result",t),a.setState({friends:Object(g.a)(a.state.friends).concat(Object(g.a)(t)),fetching:!1,initial_fetch:!0,page:a.state.page+1})}).catch(function(e){console.error("Fetch posts Error",e),a.setState({initial_fetch:!0,fetching:!1})})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.user){var t=this.props.user;this.setState({user:t,token:t.token},function(){return e.fetchFriends()})}}},{key:"render",value:function(){var e=this.state,t=e.fetching,a=e.friends;return o.a.createElement(P,{padding:"111px"},o.a.createElement(L,{noborder:!0,centers:!0},o.a.createElement("div",{className:"top-bar layout center"},o.a.createElement("span",{className:"ot-header-title"},"Ochat")),o.a.createElement("div",{id:"ot-header-tabs",className:"layout center"},o.a.createElement("button",{className:"ot-btn flat active"},"CHATS"),o.a.createElement("div",{className:"separator"}),o.a.createElement("button",{className:"ot-btn flat"},"FRIENDS"))),o.a.createElement("div",{className:"ob-ochat"},o.a.createElement("div",{id:"friendsList"},a.map(function(e){return o.a.createElement("div",{key:e.id,className:"ob-friend-item layout center"},o.a.createElement("div",{className:"ot-dp lg"},o.a.createElement("img",{src:e.dp,alt:""})),o.a.createElement("span",null,e.display_name))}),t&&o.a.createElement("div",{className:"layout center-justified"},o.a.createElement(J,null)))))}}]),t}(o.a.Component)),ze=a(50),Ue=a.n(ze),Te=a(51),Ae=a.n(Te),De=a(52),Re=a.n(De),He=a(53),Ve=a.n(He),Be=(a(145),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(P,{padding:"85px"},o.a.createElement(L,{noborder:!0},o.a.createElement("span",{className:"ot-header-title"},"Other Apps")),o.a.createElement("div",{className:"ob-other-apps"},o.a.createElement("div",{className:"apps-wrapper layout wrap"},o.a.createElement("a",{href:"https://www.olbongo.com/odrive",target:"_blank",rel:"noopener noreferrer",className:"ob-app-item"},o.a.createElement("div",{className:"ob-app-item-image"},o.a.createElement("img",{src:Re.a,alt:""})),o.a.createElement("span",{className:"ob-app-item-text"},"Odrive")),o.a.createElement("a",{href:"https://www.olbongo.com/findit",target:"_blank",rel:"noopener noreferrer",className:"ob-app-item"},o.a.createElement("div",{className:"ob-app-item-image"},o.a.createElement("img",{src:Ue.a,alt:""})),o.a.createElement("span",{className:"ob-app-item-text"},"Find It")),o.a.createElement("a",{href:"https://www.olbongo.com/oclass",target:"_blank",rel:"noopener noreferrer",className:"ob-app-item"},o.a.createElement("div",{className:"ob-app-item-image"},o.a.createElement("img",{src:Ae.a,alt:""})),o.a.createElement("span",{className:"ob-app-item-text"},"Oclass")),o.a.createElement("a",{href:"https://www.olbongo.com/ojob",target:"_blank",rel:"noopener noreferrer",className:"ob-app-item"},o.a.createElement("div",{className:"ob-app-item-image"},o.a.createElement("img",{src:Ve.a,alt:""})),o.a.createElement("span",{className:"ob-app-item-text"},"Ojob")))))}}]),t}(o.a.Component)),We=(a(146),function(e){var t=Object(n.useState)({}),a=Object(S.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)([]),c=Object(S.a)(i,2),l=c[0],m=c[1],u=Object(n.useState)(!1),d=Object(S.a)(u,2),p=d[0],h=d[1],f=Object(n.useState)(!1),E=Object(S.a)(f,2),b=E[0],w=E[1],k=Object(n.useState)(null),y=Object(S.a)(k,2),O=y[0],N=y[1],C=Object(n.useState)(!1),j=Object(S.a)(C,2),x=j[0],z=j[1];Object(n.useEffect)(function(){r(e.user),U(),T(),A()},[]);var U=function(){var t=e.user,a={token:e.sessionUser.token,user_id:t.id};v.a.get(H+"/profile/",{params:a}).then(function(e){var a=e.data[0];h(!0),r(Object(M.a)({},t,a.user))}).catch(function(e){console.error("Fetch user profile Error",e)})},T=function(){var t={token:e.sessionUser.token,user_id:e.user.id};v.a.get(H+"/user_wall/",{params:t}).then(function(e){var t=e.data;m(t),w(!0)}).catch(function(e){console.error("Fetch user posts Error",e)})},A=function(){var t={token:e.sessionUser.token};Promise.all([v.a.get(H+"/photos/",{params:t}),v.a.get(H+"/videos/",{params:t})]).then(function(e){var t=e[0].data.map(function(e){return e.type="photo",e}),a=e[1].data.map(function(e){return e.type="video",e});N(Object(g.a)(a).concat(Object(g.a)(t)))}).catch(function(e){console.error("Failed to fetch user media",e)})},D=e.sessionUser,R=D.id===s.id,V=!p&&!b,W=s.display_name,q=s.dp,K=_().isLarge,Q={onChange:function(e){z(!e.isIntersecting)},root:"body",rootMargin:"-60px 0%"},G=o.a.createElement("div",{className:"ot-user-profile"},o.a.createElement(I.a,Q,o.a.createElement("div",{className:"ot-user-profile-title layout vertical center"},o.a.createElement("div",{className:"user-details"},o.a.createElement("div",{className:"ot-dp"},o.a.createElement("img",{src:q,alt:""})),o.a.createElement("div",null,o.a.createElement("h5",null,W),R&&o.a.createElement("button",{className:"ot-btn logout-btn"},"EDIT PROFILE"))),!R&&V&&o.a.createElement(J,{thin:!0}),!p&&o.a.createElement(J,{size:"40",thin:!0}),p&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"user-stats layout center-center"},o.a.createElement("div",{className:"user-stat"},o.a.createElement("div",{className:"number"},s.followers),o.a.createElement("div",{className:"label"},"Followers")),o.a.createElement("div",{className:"user-stat"},o.a.createElement("div",{className:"number"},s.following),o.a.createElement("div",{className:"label"},"Following")),o.a.createElement("div",{className:"user-stat"},o.a.createElement("div",{className:"number"},s.friends),o.a.createElement("div",{className:"label"},"Friends"))),D.id!==s.id&&o.a.createElement("button",{className:"ot-btn fla"},"FOLLOW")))),o.a.createElement("div",{className:"layout start profile-page-content "+(K?"for-large ":"")+(x?"fix-media ":"")},o.a.createElement("div",{className:"flex"},!b&&o.a.createElement("div",{style:{paddingTop:"1.5em"},className:"layout center-justified"},o.a.createElement(J,{thin:!0})),b&&o.a.createElement(xe,{readonly:!0,user:D,posts:l})),K&&o.a.createElement("div",null,o.a.createElement("div",{id:"userMedia"},o.a.createElement("h3",null,"User Media"),o.a.createElement("div",{className:"layout wrap"},O&&O.map(function(e,t){return t<9&&o.a.createElement("div",{key:e.id,className:"user-media-item"},"photo"===e.type&&o.a.createElement(B,{src:e.path,alt:"m"}),"photo"===e.type&&o.a.createElement("video",{src:e.path}))}),!O&&o.a.createElement("div",{style:{paddingTop:"1.5em",width:"100%"},className:"layout center-justified"},o.a.createElement(J,{thin:!0})))))));return o.a.createElement(o.a.Fragment,null,!K&&!R&&o.a.createElement(F,{id:"profileUser",contentLoaded:b,peekHeight:320,onClose:e.closeProfileUser},G),(K||R)&&o.a.createElement(P,{noborder:!0,className:"profile-page"},o.a.createElement(L,null,o.a.createElement("span",{className:"ot-header-title"},"\xa0Profile"),o.a.createElement("span",{className:"flex"}),o.a.createElement("button",{className:"ot-btn",onClick:e.onLogout},"LOGOUT")),G))}),qe=(a(147),function(e){var t=e.page,a=e.onNavigateTo;return o.a.createElement("div",{className:"ot-mobile-nav layout center around-justified"},o.a.createElement("button",{className:"ot-btn flat layout vertical center-center "+("home"===t?"active":""),onClick:function(){return a("home")}},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),o.a.createElement("polyline",{points:"9 22 9 12 15 12 15 22"})),o.a.createElement("span",null,"Home")),o.a.createElement("button",{className:"ot-btn flat layout vertical center-center "+("woza"===t?"active":""),onClick:function(){return a("woza")}},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})),o.a.createElement("span",null,"Woza")),o.a.createElement("button",{className:"ot-btn flat layout vertical center-center "+("discover"===t?"active":""),onClick:function(){return a("discover")}},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("circle",{cx:"11",cy:"11",r:"8"}),o.a.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})),"Discover"),o.a.createElement("button",{className:"ot-btn flat layout vertical center-center "+("ochat"===t?"active":""),onClick:function(){return a("ochat")}},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})),o.a.createElement("span",null,"OChat")),o.a.createElement("button",{className:"ot-btn flat layout vertical center-center "+("profile"===t?"active":""),onClick:function(){return a("profile")}},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.a.createElement("circle",{cx:"12",cy:"7",r:"4"})),o.a.createElement("span",null,"Profile")))}),Ke=(a(148),function(e){var t=e.user,a=e.page,n=e.onNavigateTo,s=e.onViewProfile,r=e.onLogout;return o.a.createElement(L,{id:"desktopHeader",showtitle:"true"},o.a.createElement("img",{className:"ot-logo",src:$.a,alt:""}),"\u2003",o.a.createElement("span",{className:"ot-header-title"},"Otalk"),o.a.createElement("span",{className:"flex"}),o.a.createElement("div",{className:"ot-dp"},o.a.createElement("img",{src:t.dp,alt:"",onClick:s})),o.a.createElement("div",{className:"ot-nav layout center around-justified"},o.a.createElement("button",{className:"ot-btn flat layout vertical center-center "+("home"===a?"active":""),onClick:function(){return n("home")}},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),o.a.createElement("polyline",{points:"9 22 9 12 15 12 15 22"})),"Home"),o.a.createElement("button",{className:"ot-btn flat layout vertical center-center "+("discover"===a?"active":""),onClick:function(){return n("discover")}},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("circle",{cx:"11",cy:"11",r:"8"}),o.a.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})),"Discover"),o.a.createElement("button",{className:"ot-btn flat layout vertical center-center "+("ochat"===a?"active":""),onClick:function(){return n("ochat")}},o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})),"OChat")),o.a.createElement("span",{className:"flex"}),o.a.createElement(A,{className:"ot-auth-user"},o.a.createElement(A.Trigger,{className:"ot-btn flat layout center"},o.a.createElement("span",{className:"ot-dp"},o.a.createElement("img",{src:t.dp,alt:""})),o.a.createElement("p",null,"\xa0\xa0 ",t.display_name),o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),o.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))),o.a.createElement(A.Options,null,o.a.createElement(A.Option,{onSelected:function(){return n("profile")}}," Profile "),o.a.createElement(A.Option,{onSelected:r}," Logout "))))}),Je=(a(149),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={page:"home",user:{},profileUser:null,user_fetched:!1},a.fetchUser=Object(l.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("ot-user");case 2:t=e.sent,a.setState({user_fetched:!0}),null!=t&&a.setState({user:JSON.parse(t)});case 5:case"end":return e.stop()}},e,this)})),a.login=function(e){var t={username:e.username,password:e.password};v()({method:"POST",url:"https://www.olbongo.com/api/login/",params:t}).then(function(e){var t=e.data;if(t.status){var n=t.user,o=t.token;n.token=o,localStorage.setItem("ot-user",JSON.stringify(n)),a.setState({user:n})}else k(w("Wrong credentials!"))}).catch(function(e){console.error("Login Error",e),k(w("Wrong credentials!"))})},a.logout=function(){localStorage.removeItem("ot-user"),a.setState({profileUser:null,user_fetched:!0,user:null})},a.closeProfileUser=function(){a.setState({profileUser:null})},a.viewProfileUser=function(e){var t=e||a.state.user;a.setState({profileUser:t})},a.setPage=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a.setState({page:e}),t&&window.history.pushState([e],e,"/"+e)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.fetchUser()}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.setPage("home"),window.onpopstate=function(){document.dispatchEvent(new CustomEvent("ot-popstate")),console.log("State popped!");var t=window.location.pathname.substring(1);(t=t.substring(0,t.indexOf("#")))!==e.state.page&&e.setPage(t,!1)}}},{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.user,s=t.user_fetched,r=t.profileUser,i=n&&n.id&&n.token;return o.a.createElement("div",{className:"ot-app-wrapper",context:"counter1"},o.a.createElement(y,null),o.a.createElement("main",null,!i&&s&&o.a.createElement(j,{user:n,onLogin:this.login}),i&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Ke,{user:n,page:a,onNavigateTo:this.setPage,onLogout:this.logout}),"home"===a&&o.a.createElement(_e,{user:n,onViewProfile:function(){return e.setPage("profile")},onLogout:this.logout,onViewUser:this.viewProfileUser}),"woza"===a&&o.a.createElement(Le,{user:n}),"discover"===a&&o.a.createElement(Ie,{user:n}),"ochat"===a&&o.a.createElement(Fe,{user:n}),"apps"===a&&o.a.createElement(Be,{user:n}),"profile"===a&&o.a.createElement(We,{onLogout:this.logout,sessionUser:n,user:n}),r&&o.a.createElement(We,{onLogout:this.logout,sessionUser:n,user:r}),o.a.createElement(qe,{page:a,onNavigateTo:this.setPage}))))}}]),t}(o.a.Component)),Qe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ge(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(o.a.createElement(Je,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");Qe?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ge(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Ge(t,e)})}}()}]),[[54,1,2]]]);
//# sourceMappingURL=main.4d95ae34.chunk.js.map